(()=>{"use strict";function e(e,t){return function(e){return fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1`).then((function(e){if(e.ok)return e.json();throw Error("Some thing ain't right!")})).then((function(e){const t=e.results[0];return{latitude:t.latitude,longitude:t.longitude,timezone:t.timezone}})).catch((function(e){throw Error(e)}))}(e).then((e=>{const n=e.latitude,a=e.longitude;return fetch(`https://api.open-meteo.com/v1/forecast?latitude=${n}&longitude=${a}${t}&timezone=auto&current_weather=true`,{mode:"cors"}).then((function(e){return e.json()})).catch((e=>e))})).catch((e=>e))}const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=document.querySelector("body"),a={0:"/clear_day.svg",1:"/partly_cloudy_day.svg",2:"/partly_cloudy_day.svg",3:"/fully_cloudy.svg",4:"/foggy.svg",5:"/light_rain.svg",6:"/rain.svg",7:"/cloudy_snowing.svg",8:"/heavy_rain.svg",9:"/thunderstorm.svg"};let d="london",s="dark";async function r(){const s=document.getElementById("search");s.blur(),d=s.value||d;try{const r=function(e){const n=[],a=e.daily,d=a.time,s=a.precipitation_sum,r=a.sunrise,c=a.sunset,o=a.temperature_2m_max,i=a.temperature_2m_min,m=a.weathercode;for(let e=0;e<7;++e){let a={day:t[new Date(d[e]).getDay()],precipitation:s[e],sunrise:r[e],sunset:c[e],max:o[e],min:i[e],weatherCode:m[e]};n.push(a)}return n}(await function(t){return e(t,"&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,sunrise,sunset,weathercode").then((e=>e)).catch((e=>e))}(d)),c=function(e){const t=[],n=e.current_weather,a=n.time,d=e.hourly,s=d.temperature_2m,r=d.time,c=d.apparent_temperature,o=d.cloudcover,i=d.precipitation,m=d.relativehumidity_2m,u=d.weathercode;let l=0;for(;;){if(r[l]===a){let e=c[l],t=m[l],a=i[l],d=o[l],s=u[l];n.apparentTemperature=e,n.humidity=t,n.precipitation=a,n.cloudCover=d,n.weatherCode=s;break}l+=1}for(let e=0;e<24;e++){l+=1;let e=r[l],n=s[l],a=o[l],d=i[l],c=m[l],h=u[l];t.push({time:e,temperature:n,cloudCover:a,precipitation:d,humidity:c,weatherCode:h})}return{currentWeather:n,weatherObjects:t}}(await function(t){return e(t,"&hourly=temperature_2m,apparent_temperature,relativehumidity_2m,cloudcover,windspeed_10m,winddirection_10m,precipitation,weathercode").then((e=>e)).catch((e=>e))}(d));document.querySelectorAll(".clear").forEach((e=>{e.innerHTML=""})),function(e,t){document.getElementById("search-icon").style.background=`url('./pngs/${n.dataset.theme}/search.svg')`;const d=document.getElementById("change-theme");d.classList.add("load"),d.src=`./pngs/${n.dataset.theme}/mode.svg`,d.dataset.path="/mode.svg";const s=document.getElementById("temp"),r=document.getElementById("current-svg");r.classList.add("svg","load");const c=document.getElementById("location"),o=document.getElementById("app-temp"),i=document.getElementById("hum"),m=document.getElementById("wind");s.innerHTML="",r.innerHTML="",c.innerHTML="",o.innerHTML="",i.innerHTML="",m.innerHTML="",s.innerText=`${e.temperature}°C`;let u=e.weatherCode<10?e.weatherCode:Math.floor(e.weatherCode/10);r.src="./pngs/"+n.dataset.theme+a[u],r.dataset.path=a[u],c.innerText=`${t[0].toUpperCase()}${t.substring(1)}`,o.innerText=`${e.apparentTemperature}°C`,i.classList.add("values");const l=document.createElement("img");l.classList.add("load"),e.humidity<40?(l.src=`./pngs/${n.dataset.theme}/low_humidity.svg`,l.dataset.path="/low_humidity.svg"):e.humidity>=40&&e.humidity<60?(l.src=`./pngs/${n.dataset.theme}/mid_humidity.svg`,l.dataset.path="/mid_humidity.svg"):(l.src=`./pngs/${n.dataset.theme}/high_humidity.svg`,l.dataset.path="/high_humidity.svg");const h=document.createElement("span");h.innerText=e.humidity+"%",i.append(l,h),m.classList.add("values");const p=document.createElement("img");p.classList.add("load"),p.src=`./pngs/${n.dataset.theme}/wind.svg`,p.dataset.path="/wind.svg";const g=document.createElement("span");g.innerText=e.windspeed+"km/h",m.append(p,g)}(c.currentWeather,d),r.forEach((e=>{!function(e){const t=document.createElement("div");t.classList.add("title"),t.innerText=e.day;const d=document.createElement("p");d.classList.add("high"),d.innerText=`${e.max}°C`;const s=document.createElement("p");s.classList.add("low"),s.innerText=`${e.min}°C`;const r=document.createElement("img");r.classList.add("svg","load");let c=e.weatherCode<10?e.weatherCode:Math.floor(e.weatherCode/10);r.dataset.path=a[c],r.src="./pngs/"+n.dataset.theme+a[c];const o=document.createElement("span");o.append("Sunrise:",document.createElement("br"),`${e.sunrise.split("T")[1]}`);const i=document.createElement("span");i.append("Sunset:",document.createElement("br"),`${e.sunset.split("T")[1]}`);const m=document.createElement("div");m.classList.add("value");const u=document.createElement("div");u.classList.add("spread","value");const l=document.createElement("div");l.classList.add("daily","weather-object"),m.append(d,s);const h=document.createElement("div");h.classList.add("spread"),h.append(r,m),u.append(o,i),l.append(t,h,u),document.querySelector(".daily-container").append(l)}(e)})),c.weatherObjects.forEach((e=>{!function(e){const t=document.createElement("div");t.classList.add("title"),t.innerText=`${e.time.split("T")[1]}`;const d=document.createElement("div");d.innerText=`${e.temperature}°C`;const s=document.createElement("img");s.classList.add("svg","load");let r=e.weatherCode<10?e.weatherCode:Math.floor(e.weatherCode/10);s.dataset.path=a[r],s.src="./pngs/"+n.dataset.theme+a[r];const c=document.createElement("div");c.classList.add("values");const o=document.createElement("img");o.classList.add("load"),e.humidity<40?(o.src=`./pngs/${n.dataset.theme}/low_humidity.svg`,o.dataset.path="/low_humidity.svg"):e.humidity>=40&&e.humidity<60?(o.src=`./pngs/${n.dataset.theme}/mid_humidity.svg`,o.dataset.path="/mid_humidity.svg"):(o.src=`./pngs/${n.dataset.theme}/high_humidity.svg`,o.dataset.path="/high_humidity.svg");const i=document.createElement("span");i.innerText=e.humidity+"%",c.append(o,i);const m=document.createElement("div");m.classList.add("hourly","weather-object"),m.append(t,d,s,c),document.querySelector(".hourly-container").append(m)}(e)})),s.value=""}catch(e){const t=document.getElementById("search");return t.setCustomValidity("Enter a valid city name!"),t.reportValidity(),void(t.oninput=()=>{t.setCustomValidity("")})}}const c=document.getElementById("search-icon");c.addEventListener("click",(e=>{e.preventDefault(),r()}));const o=document.querySelector(":root"),i=document.querySelector("body");document.getElementById("change-theme").addEventListener("click",(()=>{const e=document.querySelectorAll(".load");let t=i.dataset.theme;i.dataset.theme=s,s=t,c.style.background=`url('./pngs/${i.dataset.theme}/search.svg')`,e.forEach((e=>{e.src="./pngs/"+i.dataset.theme+e.dataset.path}));let n=getComputedStyle(o),a=n.getPropertyValue("--bg"),d=n.getPropertyValue("--colo");o.style.setProperty("--bg",d),o.style.setProperty("--colo",a)})),r()})();
//# sourceMappingURL=main.js.map